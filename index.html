<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>水没検査 入力パネル（最終版）</title>
<style>
  :root{
    --bg:#0f172a;--card:#111827;--muted:#94a3b8;--ok:#16a34a;--warn:#f59e0b;--err:#ef4444;--ink:#e5e7eb;--accent:#22d3ee;
    --font-base:20px;--font-lg:28px;--btn-pad:22px 26px;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans JP",sans-serif;background:linear-gradient(160deg,#0b1222,#0f172a 40%,#0c1226);color:var(--ink);font-size:var(--font-base)}
  .wrap{max-width:1100px;margin:0 auto;padding:20px}
  header{display:flex;gap:16px;align-items:center;flex-wrap:wrap;margin-bottom:16px}
  header h1{font-size:var(--font-lg);margin:0 8px 0 0;font-weight:800}
  .card{background:var(--card);border:1px solid #1f2937;border-radius:16px;padding:18px;box-shadow:0 10px 24px rgba(0,0,0,.25)}
  .section-title{font-weight:800;margin:8px 2px 12px;color:#cbd5e1;font-size:var(--font-base)}
  .row{display:flex;gap:14px;flex-wrap:wrap}
  .grid{display:grid;grid-template-columns:repeat(4,minmax(150px,1fr));gap:14px}
  @media(max-width:900px){.grid{grid-template-columns:repeat(2,minmax(150px,1fr))}}
  .btn{border:1px solid #1f2937;background:#0b1222;color:var(--ink);border-radius:14px;padding:var(--btn-pad);font-weight:800;cursor:pointer;letter-spacing:.02em;font-size:var(--font-base)}
  .btn.big{height:100px;font-size:var(--font-lg);border-radius:16px;background:linear-gradient(180deg,#0f1b33,#0a1326);box-shadow:inset 0 0 0 1px rgba(255,255,255,.04),0 8px 20px rgba(0,0,0,.2)}
  .btn:disabled{opacity:.5;cursor:not-allowed}
  .btn.active{background:#12223f;border-color:#30548d;box-shadow:inset 0 0 0 1px rgba(34,211,238,.25),0 0 0 2px rgba(34,211,238,.15)}
  .btn.ok{background:#052e1a;border-color:#14532d}
  .btn.err{background:#3b0a0a;border-color:#7f1d1d}
  .chip{border:1px solid #233046;border-radius:999px;padding:14px 18px;background:#0b1222;color:var(--ink);cursor:pointer;font-weight:700;font-size:var(--font-base)}
  .chip.active{border-color:#2aa6c8;background:#0e1a2c}
  .muted{color:var(--muted);font-size:18px}
  .toast{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(2,6,23,.95);border:2px solid #ef4444;color:#fff;padding:20px 24px;border-radius:16px;box-shadow:0 12px 26px rgba(0,0,0,.45);opacity:0;transition:.25s;font-size:var(--font-lg);font-weight:800;text-align:center;z-index:1000}
  .toast.show{opacity:1}
  /* 検査者ボタン3等分 */
  #operatorBar{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;width:100%}
  #operatorBar .btn{width:100%;text-align:center}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>水没検査 入力パネル</h1>
    <span class="muted">（検査者 → 種別 → 合否 → 分岐）</span>
  </header>

  <!-- 検査者 -->
  <section class="card">
    <div class="section-title">検査者</div>
    <div class="row" id="operatorBar"></div>
  </section>

  <!-- 種別 -->
  <section class="card">
    <div class="section-title">検査種別</div>
    <div class="grid" id="modeGrid"></div>
  </section>

  <!-- 合否 -->
  <section class="card">
    <div class="section-title">合否</div>
    <div class="row">
      <button class="btn ok" id="btnPass">合格</button>
      <button class="btn err" id="btnFail">不合格</button>
    </div>
  </section>

  <!-- 不合格 詳細入力（例:出荷前製品） -->
  <section class="card hidden" id="preProductFailCard">
    <div class="section-title">不合格詳細</div>
    <div class="row" id="partGrid1"></div>
    <div class="row" id="defectChips1"></div>
    <div class="row" style="margin-top:14px">
      <button class="btn ok" id="btnSendPre1">送信</button>
    </div>
  </section>

  <div class="toast" id="toast"></div>
</div>
<script>
const CONFIG = {
  DEPLOY_URL: "YOUR_GAS_DEPLOY_URL_HERE",
  KEY: "KEY_2025_SUIKEN",
  OPERATORS:[{key:'matsukawa',label:'松川'},{key:'chiba',label:'千葉'},{key:'takahashi',label:'高橋'}],
  MODES:[{key:'1',label:'1 出荷前製品'},{key:'2',label:'2 出荷前修理品'},{key:'3',label:'3 初回修理品'},{key:'4',label:'4 初回修理品 裏検査'}],
  PARTS:[
    {value:'アンクル',label:'アンクル'},
    {value:'腕',label:'腕(ウデ)'},
    {value:'肩',label:'肩(カタ)'},
    {value:'グローブ',label:'グローブ'},
    {value:'腰',label:'腰(コシ)'},
    {value:'背中',label:'背中(セナカ)'},
    {value:'袖口',label:'袖口(ソデグチ)'},
    {value:'ソックス部ジョイント',label:'ソックス部ジョイント'},
    {value:'ソックス部本体',label:'ソックス部本体'},
    {value:'スネ',label:'スネ'},
    {value:'尻',label:'尻(シリ)'},
    {value:'胸',label:'胸(ムネ)'},
    {value:'ネック',label:'ネック'},
    {value:'膝上',label:'膝上(ヒザウエ)'},
    {value:'膝裏',label:'膝裏(ヒザウラ)'},
    {value:'腹',label:'腹(ハラ)'},
    {value:'パッド',label:'パッド'},
    {value:'ファスナー部',label:'ファスナー部'},
    {value:'フクラハギ',label:'フクラハギ'},
    {value:'前股',label:'前股(マエマタ)'},
    {value:'後ろ股',label:'後ろ股(ウシロマタ)'},
    {value:'腿',label:'腿(モモ)'},
    {value:'腿裏',label:'腿裏(モモウラ)'},
    {value:'脇',label:'脇(ワキ)'},
    {value:'リスト',label:'リスト'}
  ],
  DEFECTS:[{key:'pinhole',label:'ピンホール'},{key:'seam',label:'接合部'},{key:'tape',label:'テープ'}]
};

const $=s=>document.querySelector(s),$$=s=>Array.from(document.querySelectorAll(s));
const $toast=$('#toast');
function toast(msg){$toast.textContent=msg;$toast.classList.add('show');setTimeout(()=>{$toast.classList.remove('show')},1800)}

function buildOperators(){const bar=$('#operatorBar');bar.innerHTML='';CONFIG.OPERATORS.forEach(op=>{const b=document.createElement('button');b.className='btn big';b.textContent=op.label;b.onclick=()=>{ $$('#operatorBar .btn').forEach(x=>x.classList.remove('active')); b.classList.add('active');};bar.appendChild(b);});}
function buildModes(){const grid=$('#modeGrid');grid.innerHTML='';CONFIG.MODES.forEach(m=>{const b=document.createElement('button');b.className='btn big';b.textContent=m.label;grid.appendChild(b);});}
function buildParts(gridId){const grid=$(gridId);grid.innerHTML='';CONFIG.PARTS.forEach(p=>{const b=document.createElement('button');b.className='btn';b.textContent=p.label;b.onclick=()=>{ $$(gridId+' .btn').forEach(x=>x.classList.remove('active'));b.classList.add('active'); b.dataset.value=p.value;};grid.appendChild(b);});}
function buildDefects(id){const box=$(id);box.innerHTML='';CONFIG.DEFECTS.forEach(d=>{const c=document.createElement('span');c.className='chip';c.textContent=d.label;box.appendChild(c);});}

function init(){buildOperators();buildModes();buildParts('#partGrid1');buildDefects('#defectChips1');$('#btnPass').onclick=()=>toast('合格送信（fail_seq=0）');$('#btnFail').onclick=()=>{$('#preProductFailCard').classList.remove('hidden');};$('#btnSendPre1').onclick=()=>toast('不合格送信（fail_seq=1）');}

window.addEventListener('DOMContentLoaded',init);
</script>
</body>
</html>
